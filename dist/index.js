"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Variable{constructor(t,r=null,n=null){this.name=t,this.fallbackType=r,this.fallback=n,this.kind=2}stringify(t,r=!0){const n=t[this.name];return n?r?n.trim().replace(/\s+/g," "):n:this.fallback?this.fallback.stringify(t,r):null}toString(){return"${"+this.name+(this.fallbackType||"")+(this.fallback||"")+"}"}}class QuotedString{constructor(t){this.contents=t,this.kind=4}stringify(t){return this.contents.reduce((r,n)=>("string"!=typeof n&&(n=n.stringify(t,!1)||""),r+n),"")}toString(){return`"${this.contents}"`}}class VerbatimString{constructor(t){this.contents=t,this.kind=5}stringify(){return this.contents}toString(){return`'${this.contents}'`}}class Word{constructor(t){this.contents=t,this.kind=3}stringify(){return this.contents}toString(){return`(${this.contents})`}}class Whitespace{constructor(t){this.contents=t,this.kind=1}stringify(t,r=!0){return r?" ":this.contents}toString(){return`(${this.contents})`}}class List{constructor(t){this.items=t,this.kind=0}stringify(t,r=!0){if(r){let r=!1;return this.items.reduce((n,e)=>{if(1===e.kind)return r=!0,n;const i=e.stringify(t,!0);return null===i?n:(r&&""!==n&&(n+=" "),r=!1,n+i)},"")}return this.items.map(r=>r.stringify(t,!1)).filter(t=>null!==t).join("")}toString(){return`[${this.items}]`}}var tokens=Object.freeze({__proto__:null,Variable:Variable,QuotedString:QuotedString,VerbatimString:VerbatimString,Word:Word,Whitespace:Whitespace,List:List}),parser="use strict";function peg$subclass(t,r){function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n}function peg$SyntaxError(t,r,n,e){this.message=t,this.expected=r,this.found=n,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(t,r){r=void 0!==r?r:{};var n,e={},i={start:tt},s=tt,o=function(t){return new At(t)},c="${",a=J("${",!1),u=":-",l=J(":-",!1),h=":=",f=J(":=",!1),p="}",g=J("}",!1),d=function(t,r,n){return new dt(t,r,n)},y=function(t){return new dt(t)},A="$",$=J("$",!1),b=function(){return new gt("$")},m=function(t){return 1===t.length?t[0]:new At(t)},x={type:"other",description:"variable name"},S=/^[a-zA-Z_]/,v=K([["a","z"],["A","Z"],"_"],!1,!1),k=/^[a-zA-z_0-9]/,C=K([["a","z"],["A","z"],"_",["0","9"]],!1,!1),w=function(){return I()},E=/^[ \t\n\r]/,V=K([" ","\t","\n","\r"],!1,!1),W=function(){return new $t(I())},_="'",F=J("'",!1),z=function(t){return new gt(t)},L='"',Q=J('"',!1),T=function(t){return new pt(t)},j=function(){return new yt(I())},R="\\",M=J("\\",!1),O=function(t){return t},Z={type:"any"},P=function(t){return t},U=0,q=0,B=[{line:1,column:1}],D=0,G=[],H=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');s=i[r.startRule]}function I(){return t.substring(q,U)}function J(t,r){return{type:"literal",text:t,ignoreCase:r}}function K(t,r,n){return{type:"class",parts:t,inverted:r,ignoreCase:n}}function N(r){var n,e=B[r];if(e)return e;for(n=r-1;!B[n];)n--;for(e={line:(e=B[n]).line,column:e.column};n<r;)10===t.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return B[r]=e,e}function X(t,r){var n=N(t),e=N(r);return{start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:e.line,column:e.column}}}function Y(t){U<D||(U>D&&(D=U,G=[]),G.push(t))}function tt(){var t,r,n;for(t=U,r=[],n=rt();n!==e;)r.push(n),n=rt();return r!==e&&(q=t,r=o(r)),t=r}function rt(){var t;return(t=st())===e&&(t=ot())===e&&(t=nt())===e&&(t=function(){var t,r,n;if(t=U,r=[],(n=ft())!==e)for(;n!==e;)r.push(n),n=ft();else r=e;r!==e&&(q=t,r=j());return t=r}())===e&&(t=it()),t}function nt(){var r,n,i,s,o,x;return r=U,t.substr(U,2)===c?(n=c,U+=2):(n=e,0===H&&Y(a)),n!==e&&(i=et())!==e?(t.substr(U,2)===u?(s=u,U+=2):(s=e,0===H&&Y(l)),s===e&&(t.substr(U,2)===h?(s=h,U+=2):(s=e,0===H&&Y(f))),s!==e&&(o=function(){var t,r,n;t=U,r=[],(n=st())===e&&(n=ot())===e&&(n=nt())===e&&(n=ct())===e&&(n=it());for(;n!==e;)r.push(n),(n=st())===e&&(n=ot())===e&&(n=nt())===e&&(n=ct())===e&&(n=it());r!==e&&(q=t,r=m(r));return t=r}())!==e?(125===t.charCodeAt(U)?(x=p,U++):(x=e,0===H&&Y(g)),x!==e?(q=r,r=n=d(i,s,o)):(U=r,r=e)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,t.substr(U,2)===c?(n=c,U+=2):(n=e,0===H&&Y(a)),n!==e&&(i=et())!==e?(125===t.charCodeAt(U)?(s=p,U++):(s=e,0===H&&Y(g)),s!==e?(q=r,r=n=y(i)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,36===t.charCodeAt(U)?(n=A,U++):(n=e,0===H&&Y($)),n!==e&&(i=et())!==e?(q=r,r=n=y(i)):(U=r,r=e),r===e&&(r=U,36===t.charCodeAt(U)?(n=A,U++):(n=e,0===H&&Y($)),n!==e&&(q=r,n=b()),r=n))),r}function et(){var r,n,i,s;if(H++,r=U,S.test(t.charAt(U))?(n=t.charAt(U),U++):(n=e,0===H&&Y(v)),n!==e){if(i=[],k.test(t.charAt(U))?(s=t.charAt(U),U++):(s=e,0===H&&Y(C)),s!==e)for(;s!==e;)i.push(s),k.test(t.charAt(U))?(s=t.charAt(U),U++):(s=e,0===H&&Y(C));else i=e;i!==e?(q=r,r=n=w()):(U=r,r=e)}else U=r,r=e;return H--,r===e&&(n=e,0===H&&Y(x)),r}function it(){var r,n,i;if(r=U,n=[],E.test(t.charAt(U))?(i=t.charAt(U),U++):(i=e,0===H&&Y(V)),i!==e)for(;i!==e;)n.push(i),E.test(t.charAt(U))?(i=t.charAt(U),U++):(i=e,0===H&&Y(V));else n=e;return n!==e&&(q=r,n=W()),r=n}function st(){var r,n,i,s;return r=U,39===t.charCodeAt(U)?(n=_,U++):(n=e,0===H&&Y(F)),n!==e&&(i=function(){var t,r,n;if(t=U,r=[],(n=lt())!==e)for(;n!==e;)r.push(n),n=lt();else r=e;r!==e&&(q=t,r=w());return t=r}())!==e?(39===t.charCodeAt(U)?(s=_,U++):(s=e,0===H&&Y(F)),s!==e?(q=r,r=n=z(i)):(U=r,r=e)):(U=r,r=e),r}function ot(){var r,n,i,s;if(r=U,34===t.charCodeAt(U)?(n=L,U++):(n=e,0===H&&Y(Q)),n!==e){for(i=[],(s=at())===e&&(s=nt());s!==e;)i.push(s),(s=at())===e&&(s=nt());i!==e?(34===t.charCodeAt(U)?(s=L,U++):(s=e,0===H&&Y(Q)),s!==e?(q=r,r=n=T(i)):(U=r,r=e)):(U=r,r=e)}else U=r,r=e;return r}function ct(){var t,r,n;if(t=U,r=[],(n=ht())!==e)for(;n!==e;)r.push(n),n=ht();else r=e;return r!==e&&(q=t,r=j()),t=r}function at(){var t,r,n;if(t=U,r=[],(n=ut())!==e)for(;n!==e;)r.push(n),n=ut();else r=e;return r!==e&&(q=t,r=w()),t=r}function ut(){var r,n,i;return r=U,92===t.charCodeAt(U)?(n=R,U++):(n=e,0===H&&Y(M)),n!==e?(36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i===e&&(34===t.charCodeAt(U)?(i=L,U++):(i=e,0===H&&Y(Q))),i!==e?(q=r,r=n=O(i)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,n=U,H++,36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i===e&&(34===t.charCodeAt(U)?(i=L,U++):(i=e,0===H&&Y(Q))),H--,i===e?n=void 0:(U=n,n=e),n!==e?(t.length>U?(i=t.charAt(U),U++):(i=e,0===H&&Y(Z)),i!==e?(q=r,r=n=P(i)):(U=r,r=e)):(U=r,r=e)),r}function lt(){var r,n,i;return r=U,92===t.charCodeAt(U)?(n=R,U++):(n=e,0===H&&Y(M)),n!==e?(39===t.charCodeAt(U)?(i=_,U++):(i=e,0===H&&Y(F)),i!==e?(q=r,r=n=O(i)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,n=U,H++,39===t.charCodeAt(U)?(i=_,U++):(i=e,0===H&&Y(F)),H--,i===e?n=void 0:(U=n,n=e),n!==e?(t.length>U?(i=t.charAt(U),U++):(i=e,0===H&&Y(Z)),i!==e?(q=r,r=n=P(i)):(U=r,r=e)):(U=r,r=e)),r}function ht(){var r,n,i;return r=U,92===t.charCodeAt(U)?(n=R,U++):(n=e,0===H&&Y(M)),n!==e?(36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i===e&&(125===t.charCodeAt(U)?(i=p,U++):(i=e,0===H&&Y(g))),i!==e?(q=r,r=n=O(i)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,n=U,H++,36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i===e&&(125===t.charCodeAt(U)?(i=p,U++):(i=e,0===H&&Y(g)),i===e&&(i=it())),H--,i===e?n=void 0:(U=n,n=e),n!==e?(t.length>U?(i=t.charAt(U),U++):(i=e,0===H&&Y(Z)),i!==e?(q=r,r=n=P(i)):(U=r,r=e)):(U=r,r=e)),r}function ft(){var r,n,i;return r=U,92===t.charCodeAt(U)?(n=R,U++):(n=e,0===H&&Y(M)),n!==e?(36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i!==e?(q=r,r=n=O(i)):(U=r,r=e)):(U=r,r=e),r===e&&(r=U,n=U,H++,36===t.charCodeAt(U)?(i=A,U++):(i=e,0===H&&Y($)),i===e&&(i=it()),H--,i===e?n=void 0:(U=n,n=e),n!==e?(t.length>U?(i=t.charAt(U),U++):(i=e,0===H&&Y(Z)),i!==e?(q=r,r=n=P(i)):(U=r,r=e)):(U=r,r=e)),r}const{QuotedString:pt,VerbatimString:gt,Variable:dt,Word:yt,List:At,Whitespace:$t}=tokens;if((n=s())!==e&&U===t.length)return n;throw n!==e&&U<t.length&&Y({type:"end"}),bt=G,mt=D<t.length?t.charAt(D):null,xt=D<t.length?X(D,D+1):X(D,D),new peg$SyntaxError(peg$SyntaxError.buildMessage(bt,mt),bt,mt,xt);var bt,mt,xt}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(t,r){var n={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var r,n="";for(r=0;r<t.parts.length;r++)n+=t.parts[r]instanceof Array?s(t.parts[r][0])+"-"+s(t.parts[r][1]):s(t.parts[r]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+e(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+e(t)}))}return"Expected "+function(t){var r,e,i,s=new Array(t.length);for(r=0;r<t.length;r++)s[r]=(i=t[r],n[i.type](i));if(s.sort(),s.length>0){for(r=1,e=1;r<s.length;r++)s[r-1]!==s[r]&&(s[e]=s[r],e++);s.length=e}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(r)+" found."};var parser_1=(parser={SyntaxError:peg$SyntaxError,parse:peg$parse}).parse;class Variable$1{constructor(t,r=null,n=null){this.name=t,this.fallbackType=r,this.fallback=n,this.kind=2}stringify(t,r=!0){const n=t[this.name];return n?r?n.trim().replace(/\s+/g," "):n:this.fallback?this.fallback.stringify(t,r):null}toString(){return"${"+this.name+(this.fallbackType||"")+(this.fallback||"")+"}"}}class QuotedString$1{constructor(t){this.contents=t,this.kind=4}stringify(t){return this.contents.reduce((r,n)=>("string"!=typeof n&&(n=n.stringify(t,!1)||""),r+n),"")}toString(){return`"${this.contents}"`}}class VerbatimString$1{constructor(t){this.contents=t,this.kind=5}stringify(){return this.contents}toString(){return`'${this.contents}'`}}class Word$1{constructor(t){this.contents=t,this.kind=3}stringify(){return this.contents}toString(){return`(${this.contents})`}}class Whitespace$1{constructor(t){this.contents=t,this.kind=1}stringify(t,r=!0){return r?" ":this.contents}toString(){return`(${this.contents})`}}class List$1{constructor(t){this.items=t,this.kind=0}stringify(t,r=!0){if(r){let r=!1;return this.items.reduce((n,e)=>{if(1===e.kind)return r=!0,n;const i=e.stringify(t,!0);return null===i?n:(r&&""!==n&&(n+=" "),r=!1,n+i)},"")}return this.items.map(r=>r.stringify(t,!1)).filter(t=>null!==t).join("")}toString(){return`[${this.items}]`}}const parse=t=>parser_1(t),replace=(t,r)=>{return parser_1(t).stringify(r)};exports.List=List$1,exports.QuotedString=QuotedString$1,exports.Variable=Variable$1,exports.VerbatimString=VerbatimString$1,exports.Whitespace=Whitespace$1,exports.Word=Word$1,exports.parse=parse,exports.replace=replace;
//# sourceMappingURL=index.js.map
