"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Variable{constructor(r,t=null,e=null){this.name=r,this.fallbackType=t,this.fallback=e,this.kind=2}stringify(r,t=!0){const e=r[this.name];return e?t?e.trim().replace(/\s+/g," "):e:this.fallback?this.fallback.stringify(r,t):null}toString(){return"${"+this.name+(this.fallbackType||"")+(this.fallback||"")+"}"}}class QuotedString{constructor(r){this.contents=r,this.kind=4}stringify(r){return this.contents.reduce((t,e)=>("string"!=typeof e&&(e=e.stringify(r,!1)||""),t+e),"")}toString(){return`"${this.contents}"`}}class VerbatimString{constructor(r){this.contents=r,this.kind=5}stringify(){return this.contents}toString(){return`'${this.contents}'`}}class Word{constructor(r){this.contents=r,this.kind=3}stringify(){return this.contents}toString(){return`(${this.contents})`}}class List{constructor(r){this.items=r,this.kind=0}stringify(r,t=!0){if(t){let t=!1;return this.items.reduce((e,n)=>{if(1===n.kind)return t=!0,e;const i=n.stringify(r,!0);return null===i?e:(t&&""!==e&&(e+=" "),t=!1,e+i)},"")}return this.items.map(t=>t.stringify(r,!1)).filter(r=>null!==r).join("")}toString(){return`[${this.items}]`}}var tokens=Object.freeze({__proto__:null,Variable:Variable,QuotedString:QuotedString,VerbatimString:VerbatimString,Word:Word,List:List}),parser="use strict";function peg$subclass(r,t){function e(){this.constructor=r}e.prototype=t.prototype,r.prototype=new e}function peg$SyntaxError(r,t,e,n){this.message=r,this.expected=t,this.found=e,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,t){t=void 0!==t?t:{};var e,n={},i={start:rr},o=rr,a=function(r){return new yr(r)},c="${",s=J("${",!1),u=":-",l=J(":-",!1),f=":=",h=J(":=",!1),p="}",g=J("}",!1),d=function(r,t,e){return new dr(r,t,e)},A=function(r){return new dr(r)},y="$",x=J("$",!1),v=function(){return new gr("$")},b=function(r){return 1===r.length?r[0]:new yr(r)},C={type:"other",description:"variable name"},S=/^[a-zA-Z_]/,m=K([["a","z"],["A","Z"],"_"],!1,!1),$=/^[a-zA-z_0-9]/,k=K([["a","z"],["A","z"],"_",["0","9"]],!1,!1),w=function(){return I()},E=/^[ \t\n\r]/,_=K([" ","\t","\n","\r"],!1,!1),V=function(){return new xr(I())},F="'",z=J("'",!1),W=function(r){return new gr(r)},L='"',Q=J('"',!1),j=function(r){return new pr(r)},R=function(){return new Ar(I())},T="\\",M=J("\\",!1),O=function(r){return r},Z={type:"any"},P=function(r){return r},U=0,q=0,B=[{line:1,column:1}],D=0,G=[],H=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=i[t.startRule]}function I(){return r.substring(q,U)}function J(r,t){return{type:"literal",text:r,ignoreCase:t}}function K(r,t,e){return{type:"class",parts:r,inverted:t,ignoreCase:e}}function N(t){var e,n=B[t];if(n)return n;for(e=t-1;!B[e];)e--;for(n={line:(n=B[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return B[t]=n,n}function X(r,t){var e=N(r),n=N(t);return{start:{offset:r,line:e.line,column:e.column},end:{offset:t,line:n.line,column:n.column}}}function Y(r){U<D||(U>D&&(D=U,G=[]),G.push(r))}function rr(){var r,t,e;for(r=U,t=[],e=tr();e!==n;)t.push(e),e=tr();return t!==n&&(q=r,t=a(t)),r=t}function tr(){var r;return(r=or())===n&&(r=ar())===n&&(r=er())===n&&(r=function(){var r,t,e;if(r=U,t=[],(e=hr())!==n)for(;e!==n;)t.push(e),e=hr();else t=n;t!==n&&(q=r,t=R());return r=t}())===n&&(r=ir()),r}function er(){var t,e,i,o,a,C;return t=U,r.substr(U,2)===c?(e=c,U+=2):(e=n,0===H&&Y(s)),e!==n&&(i=nr())!==n?(r.substr(U,2)===u?(o=u,U+=2):(o=n,0===H&&Y(l)),o===n&&(r.substr(U,2)===f?(o=f,U+=2):(o=n,0===H&&Y(h))),o!==n&&(a=function(){var r,t,e;r=U,t=[],(e=or())===n&&(e=ar())===n&&(e=er())===n&&(e=cr())===n&&(e=ir());for(;e!==n;)t.push(e),(e=or())===n&&(e=ar())===n&&(e=er())===n&&(e=cr())===n&&(e=ir());t!==n&&(q=r,t=b(t));return r=t}())!==n?(125===r.charCodeAt(U)?(C=p,U++):(C=n,0===H&&Y(g)),C!==n?(q=t,t=e=d(i,o,a)):(U=t,t=n)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,r.substr(U,2)===c?(e=c,U+=2):(e=n,0===H&&Y(s)),e!==n&&(i=nr())!==n?(125===r.charCodeAt(U)?(o=p,U++):(o=n,0===H&&Y(g)),o!==n?(q=t,t=e=A(i)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,36===r.charCodeAt(U)?(e=y,U++):(e=n,0===H&&Y(x)),e!==n&&(i=nr())!==n?(q=t,t=e=A(i)):(U=t,t=n),t===n&&(t=U,36===r.charCodeAt(U)?(e=y,U++):(e=n,0===H&&Y(x)),e!==n&&(q=t,e=v()),t=e))),t}function nr(){var t,e,i,o;if(H++,t=U,S.test(r.charAt(U))?(e=r.charAt(U),U++):(e=n,0===H&&Y(m)),e!==n){if(i=[],$.test(r.charAt(U))?(o=r.charAt(U),U++):(o=n,0===H&&Y(k)),o!==n)for(;o!==n;)i.push(o),$.test(r.charAt(U))?(o=r.charAt(U),U++):(o=n,0===H&&Y(k));else i=n;i!==n?(q=t,t=e=w()):(U=t,t=n)}else U=t,t=n;return H--,t===n&&(e=n,0===H&&Y(C)),t}function ir(){var t,e,i;if(t=U,e=[],E.test(r.charAt(U))?(i=r.charAt(U),U++):(i=n,0===H&&Y(_)),i!==n)for(;i!==n;)e.push(i),E.test(r.charAt(U))?(i=r.charAt(U),U++):(i=n,0===H&&Y(_));else e=n;return e!==n&&(q=t,e=V()),t=e}function or(){var t,e,i,o;return t=U,39===r.charCodeAt(U)?(e=F,U++):(e=n,0===H&&Y(z)),e!==n&&(i=function(){var r,t,e;if(r=U,t=[],(e=lr())!==n)for(;e!==n;)t.push(e),e=lr();else t=n;t!==n&&(q=r,t=w());return r=t}())!==n?(39===r.charCodeAt(U)?(o=F,U++):(o=n,0===H&&Y(z)),o!==n?(q=t,t=e=W(i)):(U=t,t=n)):(U=t,t=n),t}function ar(){var t,e,i,o;if(t=U,34===r.charCodeAt(U)?(e=L,U++):(e=n,0===H&&Y(Q)),e!==n){for(i=[],(o=sr())===n&&(o=er());o!==n;)i.push(o),(o=sr())===n&&(o=er());i!==n?(34===r.charCodeAt(U)?(o=L,U++):(o=n,0===H&&Y(Q)),o!==n?(q=t,t=e=j(i)):(U=t,t=n)):(U=t,t=n)}else U=t,t=n;return t}function cr(){var r,t,e;if(r=U,t=[],(e=fr())!==n)for(;e!==n;)t.push(e),e=fr();else t=n;return t!==n&&(q=r,t=R()),r=t}function sr(){var r,t,e;if(r=U,t=[],(e=ur())!==n)for(;e!==n;)t.push(e),e=ur();else t=n;return t!==n&&(q=r,t=w()),r=t}function ur(){var t,e,i;return t=U,92===r.charCodeAt(U)?(e=T,U++):(e=n,0===H&&Y(M)),e!==n?(36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i===n&&(34===r.charCodeAt(U)?(i=L,U++):(i=n,0===H&&Y(Q))),i!==n?(q=t,t=e=O(i)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,e=U,H++,36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i===n&&(34===r.charCodeAt(U)?(i=L,U++):(i=n,0===H&&Y(Q))),H--,i===n?e=void 0:(U=e,e=n),e!==n?(r.length>U?(i=r.charAt(U),U++):(i=n,0===H&&Y(Z)),i!==n?(q=t,t=e=P(i)):(U=t,t=n)):(U=t,t=n)),t}function lr(){var t,e,i;return t=U,92===r.charCodeAt(U)?(e=T,U++):(e=n,0===H&&Y(M)),e!==n?(39===r.charCodeAt(U)?(i=F,U++):(i=n,0===H&&Y(z)),i!==n?(q=t,t=e=O(i)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,e=U,H++,39===r.charCodeAt(U)?(i=F,U++):(i=n,0===H&&Y(z)),H--,i===n?e=void 0:(U=e,e=n),e!==n?(r.length>U?(i=r.charAt(U),U++):(i=n,0===H&&Y(Z)),i!==n?(q=t,t=e=P(i)):(U=t,t=n)):(U=t,t=n)),t}function fr(){var t,e,i;return t=U,92===r.charCodeAt(U)?(e=T,U++):(e=n,0===H&&Y(M)),e!==n?(36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i===n&&(125===r.charCodeAt(U)?(i=p,U++):(i=n,0===H&&Y(g))),i!==n?(q=t,t=e=O(i)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,e=U,H++,36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i===n&&(125===r.charCodeAt(U)?(i=p,U++):(i=n,0===H&&Y(g)),i===n&&(i=ir())),H--,i===n?e=void 0:(U=e,e=n),e!==n?(r.length>U?(i=r.charAt(U),U++):(i=n,0===H&&Y(Z)),i!==n?(q=t,t=e=P(i)):(U=t,t=n)):(U=t,t=n)),t}function hr(){var t,e,i;return t=U,92===r.charCodeAt(U)?(e=T,U++):(e=n,0===H&&Y(M)),e!==n?(36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i!==n?(q=t,t=e=O(i)):(U=t,t=n)):(U=t,t=n),t===n&&(t=U,e=U,H++,36===r.charCodeAt(U)?(i=y,U++):(i=n,0===H&&Y(x)),i===n&&(i=ir()),H--,i===n?e=void 0:(U=e,e=n),e!==n?(r.length>U?(i=r.charAt(U),U++):(i=n,0===H&&Y(Z)),i!==n?(q=t,t=e=P(i)):(U=t,t=n)):(U=t,t=n)),t}const{QuotedString:pr,VerbatimString:gr,Variable:dr,Word:Ar,List:yr,Whitespace:xr}=tokens;if((e=o())!==n&&U===r.length)return e;throw e!==n&&U<r.length&&Y({type:"end"}),vr=G,br=D<r.length?r.charAt(D):null,Cr=D<r.length?X(D,D+1):X(D,D),new peg$SyntaxError(peg$SyntaxError.buildMessage(vr,br),vr,br,Cr);var vr,br,Cr}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var e={literal:function(r){return'"'+i(r.text)+'"'},class:function(r){var t,e="";for(t=0;t<r.parts.length;t++)e+=r.parts[t]instanceof Array?o(r.parts[t][0])+"-"+o(r.parts[t][1]):o(r.parts[t]);return"["+(r.inverted?"^":"")+e+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function n(r){return r.charCodeAt(0).toString(16).toUpperCase()}function i(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+n(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+n(r)}))}return"Expected "+function(r){var t,n,i,o=new Array(r.length);for(t=0;t<r.length;t++)o[t]=(i=r[t],e[i.type](i));if(o.sort(),o.length>0){for(t=1,n=1;t<o.length;t++)o[t-1]!==o[t]&&(o[n]=o[t],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(r)+" but "+function(r){return r?'"'+i(r)+'"':"end of input"}(t)+" found."};var parser_1=(parser={SyntaxError:peg$SyntaxError,parse:peg$parse}).parse;const parse=r=>parser_1(r),replace=(r,t)=>{return parser_1(r).stringify(t)};exports.List=List,exports.QuotedString=QuotedString,exports.Variable=Variable,exports.VerbatimString=VerbatimString,exports.Word=Word,exports.parse=parse,exports.replace=replace;
//# sourceMappingURL=index.js.map
